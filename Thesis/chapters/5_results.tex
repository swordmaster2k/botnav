\chapter{Analysis}

\noindent
The purpose of this section is to define the testing methodology used to compare D* Lite and Field D* to each other. It is split into two sections one covering the tests carried for simulations and the other for actual physical testing and their results.

%----------------------------------------------------------------------------------------------------------------------

\section{Test Cases}

\noindent
Provide all of the necessary details surrounding the sample environments used, file names, physical and cell size, and an example of one possibly a picture or a scaled text version. These environments should be based on real ones however they will remain unchanged during the planning process.

\newpage

\subsection{Test Case 1: Path Length}

\noindent 
Each of the planners produce one key output and that is a path from our start position to the goal. A property that all of these paths share in common is their physical length in metres. The goal of all of these planners is to compute the shortest path from the robot's current position to the goal. In order to determine on average which of the planners produces the best result for a given scenario we will examine the time it takes to traverse. \\

\noindent
Based on a large number of evaluations from every possible starting position to the goal for a given map it will be possible to say which planning algorithm on average produces the shortest path. To make this test fair it shall be based on a theoretical mobile robot with the following properties: 

\begin{itemize}
\item Average Speed: $0.6m/s$
\item Turning Speed: $1rad/s$ 
\end{itemize} 

\noindent
These figures were gathered from the performance of the DFRobot Cherokey 4WD platform during path traversals. It is important to note here that we are assigning a time penalty for turning which requires deceleration. Calculating the cost using this theoretical model reduces the error rate in our results as we do not have to deal with drift or other physical properties that affect real robot platforms. It also reduces the time it takes to test as we can now perform thousands of simulated runs at once. Our physical robot can be used to complement the results of this test. \\

\noindent
\textbf{Expected Result:} based on the claims of the authors of Field D* and Theta* we expect that the planners capable of dealing with headings other than $\dfrac{\pi}{4}$ will perform better.

\newpage

\subsubsection{Cost Computation}

\noindent
The time it takes to traverse a path is then based on two inputs:

\begin{itemize}
\item Path length in metres.
\item Total heading change in radians.
\end{itemize}

\noindent
We can extract these two inputs from our raw path of points. The path length is simply the sum of all the distances between every point using the coordinate geometry distance formula: \\

\indent $d = \sqrt{(x_{2} - x_{1})^{2} + (y_{2} - y_{1})^{2}}$ \\

\noindent
Which can be implemented in \textit{psuedocode} as: \\

\begin{lstlisting}
length = 0

for each point in path:
	next_point = point.next()
	
	if next_point is not null:
		length += math.sqrt((next_point.x - point.x) ^ 2 + (next_point.x - point.x) ^ 2)
\end{lstlisting}

\noindent
The total number of headings changes is just the sum of the difference between our current heading at a point and the change in direction required to face the new point. Our equation for calculating the cost of traversing a path is then: \\

\indent $time = path\_length \times 0.6 + total\_rotations \times 1.0$ \\

\newpage

\subsubsection{Example}

\noindent
\textbf{Given:} path of $3m$ containing a total heading change of $1rad$. \\

\noindent
Based on the equation we just defined we can get the path cost by substitution: \\

\indent $\Rightarrow time = path\_length \times 0.6 + total\_rotations \times 1.0$ \\
\indent $\Rightarrow time = (3) \times 0.6 + (1) \times 1.0$ \\
\indent $\Rightarrow time = 5 + 1$ \\
\indent $\Rightarrow time = 6s$ \\

\noindent
We can use the result from this simple computation during our comparative analysis to determine which planner is producing the lowest costing path. The result can also help in calculating the resources required to reach the goal \textit{i.e.} battery drain, as time spent moving costs a significant amount of energy.

\subsection{Test 2: Vertex Accesses}

\noindent
In order to completely address our main research question we must look at one other function that all the path planners perform during the planning process.  
While execution time seems like an obvious measure that can help determine the most capable path planner it is highly subjective and variable. The time the planner spends in a processor can vary hugely based on the hardware configuration and the operating systems thread manager. For example a robot running around on a single core 700mhz processor will not have the same computing power as a quad core clocked at 2.2Ghz. The time spent calculating the path on the 700mhz processor could be significantly higher, yet the steps involved are exactly the same. \\

\noindent
An alternative to clocking the execution time is to keep track of the number of operations it takes to reach a certain goal. When it comes to path planning algorithms the highest costing operation is anything that involves accessing a \textit{vertex}. Depending on the planners representation a vertex can either be a cell or an edge, vertices are accessed during cost calculation, updates, and traversals. Given this figure when can assign a constant time cost for every access independently of the processor. This works in practice as all of the planners use simple mathematical calculations when working with vertices. This allows us to safely establish a theoretical execution time. \\   

\noindent
\textbf{Test 2:} is concerned with how many vertices (cells) need to be accessed to build a shortest path. This is different from expansion which looks at all the vertices at once.\\

\noindent
\textbf{Expected:} since Field D* can deal with more headings it should produce a shorter path and therefore pass through less vertices than D* Lite.\\

\noindent
\textbf{Output:} absolute number of vertex accesses wrote to the debug file.

\subsubsection{Evaluation}

\newpage

\section{Discussion}
Discuss the findings, highlight any particularly interesting trends or patterns, also mention any difficulties encountered during testing. State the significance of the results